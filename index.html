<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link
      href="https://fonts.googleapis.com/css2?family=Raleway:wght@700&family=Oleo+Script:wght@700&family=Quicksand:wght@300;500&display=swap"
      rel="stylesheet"
    />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Travel Goals</title>
    <link rel="stylesheet" href="shared.css" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header>
      <div id="page-logo">
        <a href="/index.html">Library</a>
      </div>
      <nav>
        <ul>
          <li><a href="/add-book.html">Add Book</a></li>
          <li>
            <a href="https://contact-ekansh.herokuapp.com/">Contact Us</a>
          </li>
          <li><a href="https://github.com/CAPTAINCOBRA">About</a></li>
        </ul>
      </nav>
    </header>

    <main>
      <section id="hero">
        <div id="hero-content">
          <h1>Ekansh's Library</h1>
          <p>Let's explore the world of books together!</p>
          <a href="/repertoire.html">Discover books</a>
          <a id="show" href="#root">Repertoire</a>
        </div>
      </section>
      <section id="highlights">
        <h2>Highlights</h2>
        <ul id="destinations">
          <li class="destination">
            <img
              src="images/fav-books/famous-five.jpg"
              alt="Miami streets on sunny day"
              title="Miami streets on sunny day"
            />
            <p>Famous <strong>Five</strong></p>
          </li>
          <li class="destination">
            <img
              src="images/fav-books/angDem.jpg"
              alt="Munich stadium in winter"
              title="Munich stadium in winter"
            />
            <p>Angels & <strong>Demons</strong></p>
          </li>
          <li class="destination">
            <img
              src="images/fav-books/camelClub.jpg"
              alt="Palm beach in Barcelona"
              title="Palm beach in Barcelona"
            />
            <p>Camel <strong>Club</strong></p>
          </li>
        </ul>
      </section>
    </main>
    <div id="root"></div>
    <footer>
      <ul>
        <li>
          <a href="https://www.instagram.com">
            <img src="images/icons/insta.png" alt="Instagram logo"
          /></a>
        </li>
        <li>
          <a href="https://www.facebook.com">
            <img src="images/icons/facebook.png" alt="Facebook logo"
          /></a>
        </li>
      </ul>
    </footer>
    <!-- Imports and Configuration Section -->
    <script type="module" id="MainScript">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.5.0/firebase-app.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries

      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyAwumkhm8FXf9gqxJamWDfKB2810--fOxk",
        authDomain: "library-83403.firebaseapp.com",
        databaseURL:
          "https://library-83403-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "library-83403",
        storageBucket: "library-83403.appspot.com",
        messagingSenderId: "801479317930",
        appId: "1:801479317930:web:4dcf61be9e2f45d44133d3",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);

      import {
        getDatabase,
        ref,
        set,
        child,
        update,
        remove,
        get,
      } from "https://www.gstatic.com/firebasejs/9.5.0/firebase-database.js";

      const db = getDatabase();

      const appl = document.getElementById("root");
      const container = document.createElement("div");
      container.setAttribute("class", "container");
      appl.appendChild(container);

      // Get data function
      const getData = () => {
        const dbref = ref(db);

        get(child(dbref, "/books")).then(function (snapshot) {
          if (snapshot.exists()) {
            const data = snapshot.val();
            //
            data.forEach((book) => {
              const card = document.createElement("div");
              card.setAttribute("class", "card");

              const h1 = document.createElement("h1");
              h1.textContent = book.name;

              const p = document.createElement("p");
              // book.description = book.description.substring(0, 300);
              p.textContent = `${book.description}...`;

              const div = document.createElement("div");
              div.setAttribute("class", "imgDiv");

              const img = document.createElement("img");
              img.src = book.image;
              div.appendChild(img);

              container.appendChild(card);
              card.appendChild(h1);
              // card.appendChild(img);
              card.appendChild(div);
              card.appendChild(p);
            });
            //
            console.log(data);
          } else {
            console.log("No data found");
          }
          // console.log(snapshot.val());
        });
      };

      document.getElementById("show").addEventListener("click", getData);
    </script>
    <script src="script.js"></script>
  </body>
</html>

<!-- document.getElementById("add-book").addEventListener("click", function() {
  const bookName = document.getElementById("book-name").value;
  const bookAuthor = document.getElementById("book-author").value;
  const bookGenre = document.getElementById("book-genre").value;
  const bookYear = document.getElementById("book-year").value;
  const bookImage = document.getElementById("book-image").value;
  const bookDescription = document.getElementById("book-description").value;

  // const book = {
  //   name: bookName,
  } -->

<!-- 
  // Get a reference to the database service
  const database = app.database(); -->

<!-- // document.getElementById("show").onClick = function () {
    //   firebase
    //     .database()
    //     .ref("/")
    //     .once("value", function (snapshot) {
    //       console.log(snapshot.val());
    //     });
    //   // database.ref("/books").once("value").then(function (snapshot) {
    //   //   console.log(snapshot.val());
    //   // });
    // }; -->

<!-- //Smooth Scroll Starts. Found a btter way to do this. In CSS - html{scroll-behavior:smooth}
    // document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
    //   anchor.addEventListener("click", function (e) {
    //     e.preventDefault();

    //     document.querySelector(this.getAttribute("href")).scrollIntoView({
    //       behavior: "smooth",
    //     });
    //   });
    // });
    //Smooth Scroll Ends -->
